╔═══════════════════════════════════════════════════════════════════════════╗
║                    DIAGRAMA ENTIDADE RELACIONAMENTO (DER)                  ║
║                  Sistema de Controle de Estoque - SAEP_DB                  ║
╚═══════════════════════════════════════════════════════════════════════════╝


┌─────────────────────┐
│      auth_user      │
├─────────────────────┤
│ PK  id              │
│     username (U)    │
│     password        │
│     email           │
│     first_name      │
│     last_name       │
│     is_active       │
│     date_joined     │
└─────────────────────┘


┌─────────────────────────────────────┐
│      categories_category            │
├─────────────────────────────────────┤
│ PK  id                              │
│     name (UNIQUE)                   │
│     created_at                      │
└─────────────────────────────────────┘
            │
            │ N:N
            │
            ▼
┌─────────────────────────────────────────────────────────────────────┐
│                           items_item                                │
├─────────────────────────────────────────────────────────────────────┤
│ PK  id                                                              │
│     name                                                            │
│     code (UNIQUE)                                                   │
│     manufacturer                                                    │
│     price                                                           │
│     description                                                     │
│     quantity                                                        │
│     minimum_stock                                                   │
│     processor                                                       │
│     ram                                                             │
│     storage                                                         │
│     screen_size                                                     │
│     camera_resolution                                               │
│     operating_system                                                │
│     color                                                           │
│     voltage                                                         │
│     dimensions                                                      │
│     resolution                                                      │
│     connectivity                                                    │
│     ports                                                           │
│     material                                                        │
│     weight                                                          │
│     status (IN_USE|MAINTENANCE|AVAILABLE|BROKEN)                   │
│     created_at                                                      │
│     updated_at                                                      │
└─────────────────────────────────────────────────────────────────────┘
            │
            │ 1:N
            │
            ▼
┌─────────────────────────────────────────────────────────────────────┐
│                    items_stockmovement                              │
├─────────────────────────────────────────────────────────────────────┤
│ PK  id                                                              │
│ FK  item_id  ───►  items_item.id (CASCADE)                         │
│     movement_type (ENTRADA|SAIDA)                                   │
│     quantity                                                        │
│     date                                                            │
│     notes                                                           │
│     created_at                                                      │
└─────────────────────────────────────────────────────────────────────┘


┌─────────────────────────────────────────────────────────────────────┐
│               items_item_categories (M2M)                           │
├─────────────────────────────────────────────────────────────────────┤
│ PK  id                                                              │
│ FK  item_id      ───►  items_item.id                               │
│ FK  category_id  ───►  categories_category.id                      │
└─────────────────────────────────────────────────────────────────────┘


═══════════════════════════════════════════════════════════════════════════

RELACIONAMENTOS:

1. Category ←─────N:N─────→ Item
   - Uma categoria pode ter múltiplos produtos
   - Um produto pode pertencer a múltiplas categorias
   - Implementado via tabela intermediária items_item_categories

2. Item ←─────1:N─────→ StockMovement
   - Um produto pode ter múltiplas movimentações
   - Uma movimentação pertence a apenas um produto
   - Deleção em cascata

═══════════════════════════════════════════════════════════════════════════

CONSTRAINTS:

- items_item.code: UNIQUE
- categories_category.name: UNIQUE
- items_stockmovement.quantity: CHECK (quantity > 0)
- items_item.quantity: CHECK (quantity >= 0)
- items_item.price: CHECK (price >= 0)

═══════════════════════════════════════════════════════════════════════════
